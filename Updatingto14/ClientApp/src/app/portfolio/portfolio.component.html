<div *ngIf="loggedIn">
  <div style="text-align: center" class="row justify-content-center">
    <div class="card col col-sm-6 shadow border border-dark m-2 p-2">
      <span *ngIf="!editMode">
        <p>{{ profileName }}</p>
        <p>Current Cash: ${{ currentCash.toFixed(2) }}</p>
        <p>Portfolio Value: ${{ portfolioValue.toFixed(2) }}</p>
        <button (click)="toggleEdit()">Edit Profile</button>
      </span>
      <span *ngIf="editMode">
        <form #SaveChanges="ngForm" (ngSubmit)="saveChanges(SaveChanges)">
          <input
            type="text"
            name="profileName"
            placeholder="{{ profileName }}"
            ngModel
          />
          <button>Save Changes</button>
        </form>
        <button (click)="toggleEdit()">Back to Profile</button>
      </span>
    </div>
  </div>

  <div *ngIf="isEmpty">
    <!-- structural directive = ngfor ng if -->
    <div
      *ngFor="let s of stonk.tickers; index as i"
      class="row justify-content-center"
      style="text-align: center"
    >
      <div
        *ngIf="s.day.o < s.day.c"
        class="card col col-sm-6 shadow border border-success m-2 p-0"
      >
        <div class="card-header d-flex flex-row justify-content-around">
          <h3>{{ s.ticker }} - ${{ s.day.c.toFixed(2) }}</h3>
          <div>
            <span>+${{ (s.day.c - s.day.o).toFixed(2) }}</span>
            <span id="icon" class="material-symbols-outlined">
              trending_up
            </span>
          </div>
        </div>
        <p>
          Cost Basis: ${{ allStonksOwnedByUser[i].purchasePrice.toFixed(2) }}
        </p>
        <p>Shares Owned: {{ allStonksOwnedByUser[i].sharesOwned }}</p>
        <button
          type="button"
          class="btn btn-success m-3"
          routerLink="/StonkDetails/{{ s.ticker }}"
        >
          Click for Deets
        </button>
      </div>
      <div
        *ngIf="s.day.o > s.day.c"
        class="card col col-sm-6 shadow border border-danger m-2 p-0"
      >
        <div class="card-header d-flex flex-row justify-content-around">
          <h3>{{ s.ticker }} - ${{ s.day.c.toFixed(2) }}</h3>
          <div>
            <span>-${{ (s.day.o - s.day.c).toFixed(2) }}</span>
            <span id="icon" class="material-symbols-outlined">
              trending_down
            </span>
          </div>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            Cost Basis: ${{ allStonksOwnedByUser[i].purchasePrice.toFixed(2) }}
          </li>
          <li class="list-group-item">
            Shares Owned: {{ allStonksOwnedByUser[i].sharesOwned }}
          </li>
          <button
            type="button"
            class="btn btn-danger m-3"
            routerLink="/StonkDetails/{{ s.ticker }}"
          >
            Click for Deets
          </button>
        </ul>
      </div>
    </div>
  </div>
  <div *ngIf="!isEmpty">
    <p>buy some stocks to get started!</p>
  </div>
</div>
